#include <map>
#include <vector>
#include <utility>
#include <iostream>
#include "Shop.h"
//#include "Player.h"
#include "AttackBoost.h"
#include "DefenseBoost.h"
#include "HealthPotion.h"
#include "ManaPotion.h"

using namespace std;

Shop::Shop()
{
	AvailableItems.push_back({ new AttackBoost(), 3});
	AvailableItems.push_back({ new DefenseBoost(), 3});
	AvailableItems.push_back({ new HealthPotion(), 3});
	AvailableItems.push_back({ new ManaPotion(), 3});


	cout << "상점에 오신 걸 환영합니다!" << endl;

}

Shop::~Shop()
{
	for (auto& it : AvailableItems)
	{
		delete it.first;
	}
	AvailableItems.clear();
}


void Shop::DisplayItems()
{
	cout << "구매 가능한 아이템:" << endl;
	int i = 1;
	for (auto& it : AvailableItems)
	{
		cout << i << ". " << it.first->GetName() << " " << it.second << "개" << endl; //<< it.first->;
		++i;
	}
}

void Shop::BuyItem(int Index, Character* Player)
{
	int playerGold = Player->GetGold();
	Item* buyItem = AvailableItems[Index - 1].first;

	if (PlayerGold < buyItem.GetPrice())
	{
		cout << "돈이 부족합니다." << endl;
	}
	else
	{
		//Player->Inventory.Push_back(buyItem);
		//Player->AddItem(buyItem);

		Player->SetGold(playerGold - buyItem.GetGold());

		cout << buyItem.GetName() << "을 구매했습니다!"
	}
}

//void Shop::SellItem(int Index, Character* Player)
//{
//	map<Item*, int> PlayerInventory = Player->GetInventory();
//
//	PlayerInventory.begin();
//
//	PlayerInventory-
//
//	//Player->sellitem(Index, 1);
//}
